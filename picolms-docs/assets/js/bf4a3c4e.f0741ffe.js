"use strict";(globalThis.webpackChunkpicolms_docs=globalThis.webpackChunkpicolms_docs||[]).push([[6625],{8453(e,n,s){s.d(n,{R:()=>a,x:()=>o});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}},8660(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"api/hooks/use-question-state","title":"useQuestionState","description":"A React hook for managing question state, including answers, submission status, attempt tracking, and time tracking. This hook provides the core state management functionality used by BaseQuestion and can be used in custom question implementations.","source":"@site/docs/api/hooks/use-question-state.mdx","sourceDirName":"api/hooks","slug":"/api/hooks/use-question-state","permalink":"/picolms-docs/docs/api/hooks/use-question-state","draft":false,"unlisted":false,"editUrl":"https://github.com/berkesas/picolms/tree/main/packages/create-docusaurus/templates/shared/docs/api/hooks/use-question-state.mdx","tags":[],"version":"current","frontMatter":{"id":"use-question-state","title":"useQuestionState","sidebar_label":"useQuestionState"},"sidebar":"apiSidebar","previous":{"title":"Hooks","permalink":"/picolms-docs/docs/category/hooks"},"next":{"title":"useQuestionTimer","permalink":"/picolms-docs/docs/api/hooks/use-question-timer"}}');var r=s(4848),i=s(8453);const a={id:"use-question-state",title:"useQuestionState",sidebar_label:"useQuestionState"},o="useQuestionState",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Import",id:"import",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"<code>options</code>",id:"options",level:3},{value:"Examples",id:"examples",level:3},{value:"Basic Configuration",id:"basic-configuration",level:4},{value:"With Initial Answer",id:"with-initial-answer",level:4},{value:"With Change Callback",id:"with-change-callback",level:4},{value:"With Auto-save",id:"with-auto-save",level:4},{value:"Return Value",id:"return-value",level:2},{value:"Properties",id:"properties",level:3},{value:"<code>answer</code>",id:"answer",level:4},{value:"<code>status</code>",id:"status",level:4},{value:"<code>attemptNumber</code>",id:"attemptnumber",level:4},{value:"<code>timeSpent</code>",id:"timespent",level:4},{value:"<code>isAnswered</code>",id:"isanswered",level:4},{value:"Methods",id:"methods",level:3},{value:"<code>setAnswer(value)</code>",id:"setanswervalue",level:4},{value:"<code>clearAnswer()</code>",id:"clearanswer",level:4},{value:"<code>setStatus(status)</code>",id:"setstatusstatus",level:4},{value:"<code>incrementAttempt()</code>",id:"incrementattempt",level:4},{value:"QuestionAnswer Object",id:"questionanswer-object",level:2},{value:"Submission Status Values",id:"submission-status-values",level:2},{value:"Time Tracking",id:"time-tracking",level:2},{value:"Display Time",id:"display-time",level:3},{value:"Stop Time Tracking",id:"stop-time-tracking",level:3},{value:"Auto-save Feature",id:"auto-save-feature",level:2},{value:"Basic Auto-save",id:"basic-auto-save",level:3},{value:"Custom Auto-save Logic",id:"custom-auto-save-logic",level:3},{value:"Examples",id:"examples-1",level:2},{value:"Short Answer Question",id:"short-answer-question",level:3},{value:"Multiple Choice with Attempt Tracking",id:"multiple-choice-with-attempt-tracking",level:3},{value:"Controlled Component",id:"controlled-component",level:3},{value:"Quiz with Auto-save",id:"quiz-with-auto-save",level:3},{value:"Progress Tracking",id:"progress-tracking",level:3},{value:"TypeScript",id:"typescript",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Reset Question",id:"reset-question",level:3},{value:"Check if Modified",id:"check-if-modified",level:3},{value:"Prevent Navigation with Unsaved Changes",id:"prevent-navigation-with-unsaved-changes",level:3},{value:"Related Hooks",id:"related-hooks",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"usequestionstate",children:"useQuestionState"})}),"\n",(0,r.jsxs)(n.p,{children:["A React hook for managing question state, including answers, submission status, attempt tracking, and time tracking. This hook provides the core state management functionality used by ",(0,r.jsx)(n.code,{children:"BaseQuestion"})," and can be used in custom question implementations."]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"useQuestionState"})," handles:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Answer Management"}),": Store and update question answers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Status Tracking"}),": Track submission status (not-started, in-progress, submitted, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Attempt Counting"}),": Track number of answer attempts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Time Tracking"}),": Automatically track time spent on the question"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Auto-save"}),": Optional automatic saving with configurable delay"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Change Callbacks"}),": Notify parent components of state changes"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"import",children:"Import"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useQuestionState } from '@scinforma/picolms';\n"})}),"\n",(0,r.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useQuestionState } from '@scinforma/picolms';\r\n\r\nfunction MyCustomQuestion({ config }) {\r\n  const {\r\n    answer,\r\n    setAnswer,\r\n    clearAnswer,\r\n    status,\r\n    timeSpent,\r\n    isAnswered,\r\n  } = useQuestionState({\r\n    config,\r\n    initialAnswer: '',\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        value={answer.value || ''}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n        disabled={status === 'submitted'}\r\n      />\r\n      <p>Time spent: {timeSpent}s</p>\r\n      <button onClick={clearAnswer}>Clear</button>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsx)(n.h3,{id:"options",children:(0,r.jsx)(n.code,{children:"options"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"UseQuestionStateOptions<T>"})]}),"\n",(0,r.jsx)(n.p,{children:"Configuration object for the hook."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Required"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"config"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"QuestionConfig"})}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Question configuration object"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"initialAnswer"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"T"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"undefined"})}),(0,r.jsx)(n.td,{children:"Initial answer value"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"onAnswerChange"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"(answer: QuestionAnswer<T>) => void"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Callback when answer changes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"autoSave"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"false"})}),(0,r.jsx)(n.td,{children:"Enable automatic saving"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"autoSaveDelay"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"number"})}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"1000"})}),(0,r.jsx)(n.td,{children:"Auto-save delay in milliseconds"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,r.jsx)(n.h4,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const state = useQuestionState({\r\n  config: {\r\n    id: 'q1',\r\n    type: 'short-answer',\r\n    question: 'What is your name?',\r\n  },\r\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"with-initial-answer",children:"With Initial Answer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const state = useQuestionState({\r\n  config: questionConfig,\r\n  initialAnswer: 'Previous answer',\r\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"with-change-callback",children:"With Change Callback"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const state = useQuestionState({\r\n  config: questionConfig,\r\n  onAnswerChange: (answer) => {\r\n    console.log('Answer changed:', answer.value);\r\n    console.log('Time spent:', answer.timeSpent);\r\n    saveToBackend(answer);\r\n  },\r\n});\n"})}),"\n",(0,r.jsx)(n.h4,{id:"with-auto-save",children:"With Auto-save"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const state = useQuestionState({\r\n  config: questionConfig,\r\n  autoSave: true,\r\n  autoSaveDelay: 2000, // Save 2 seconds after last change\r\n  onAnswerChange: (answer) => {\r\n    // This will be called immediately\r\n    updateLocalState(answer);\r\n  },\r\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"UseQuestionStateReturn<T>"})]}),"\n",(0,r.jsx)(n.p,{children:"The hook returns an object with the following properties and methods:"}),"\n",(0,r.jsx)(n.h3,{id:"properties",children:"Properties"}),"\n",(0,r.jsx)(n.h4,{id:"answer",children:(0,r.jsx)(n.code,{children:"answer"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"QuestionAnswer<T>"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Complete answer object with metadata"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { answer } = useQuestionState(options);\r\n\r\nconsole.log(answer);\r\n// {\r\n//   questionId: 'q1',\r\n//   value: 'My answer',\r\n//   isAnswered: true,\r\n//   attemptNumber: 1,\r\n//   timeSpent: 45,\r\n//   timestamp: '2025-01-01T12:00:00Z'\r\n// }\n"})}),"\n",(0,r.jsx)(n.h4,{id:"status",children:(0,r.jsx)(n.code,{children:"status"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"SubmissionStatus"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Values"}),": ",(0,r.jsx)(n.code,{children:"'not-started' | 'in-progress' | 'submitted' | 'graded'"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Current submission status of the question"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { status } = useQuestionState(options);\r\n\r\nif (status === 'submitted') {\r\n  // Show submitted state\r\n}\n"})}),"\n",(0,r.jsx)(n.h4,{id:"attemptnumber",children:(0,r.jsx)(n.code,{children:"attemptNumber"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"number"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Current attempt number (starts at 1)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { attemptNumber } = useQuestionState(options);\r\n\r\nconsole.log(`Attempt ${attemptNumber} of 3`);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"timespent",children:(0,r.jsx)(n.code,{children:"timeSpent"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"number"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Time spent on question in seconds (auto-updates every second)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { timeSpent } = useQuestionState(options);\r\n\r\nconst minutes = Math.floor(timeSpent / 60);\r\nconst seconds = timeSpent % 60;\r\nconsole.log(`${minutes}:${seconds.toString().padStart(2, '0')}`);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"isanswered",children:(0,r.jsx)(n.code,{children:"isAnswered"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"boolean"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Whether the question has been answered (value is not null/undefined/empty)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { isAnswered } = useQuestionState(options);\r\n\r\nif (!isAnswered) {\r\n  console.log('Please answer the question');\r\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h4,{id:"setanswervalue",children:(0,r.jsx)(n.code,{children:"setAnswer(value)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"(value: T) => void"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Update the answer value. Automatically updates timestamp, triggers callbacks, and sets status to 'in-progress' if not started."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { setAnswer } = useQuestionState(options);\r\n\r\n// Set answer value\r\nsetAnswer('My new answer');\r\n\r\n// For multiple choice\r\nsetAnswer('option-b');\r\n\r\n// For multi-select\r\nsetAnswer(['option-a', 'option-c']);\n"})}),"\n",(0,r.jsx)(n.h4,{id:"clearanswer",children:(0,r.jsx)(n.code,{children:"clearAnswer()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"() => void"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Clear the current answer (sets value to undefined)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { clearAnswer } = useQuestionState(options);\r\n\r\n// Reset the question\r\nclearAnswer();\n"})}),"\n",(0,r.jsx)(n.h4,{id:"setstatusstatus",children:(0,r.jsx)(n.code,{children:"setStatus(status)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"(status: SubmissionStatus) => void"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Manually update the submission status"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { setStatus } = useQuestionState(options);\r\n\r\n// Mark as submitted\r\nsetStatus('submitted');\r\n\r\n// Mark as graded\r\nsetStatus('graded');\n"})}),"\n",(0,r.jsx)(n.h4,{id:"incrementattempt",children:(0,r.jsx)(n.code,{children:"incrementAttempt()"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type"}),": ",(0,r.jsx)(n.code,{children:"() => void"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Description"}),": Increment the attempt counter (used when validation fails)"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { incrementAttempt, attemptNumber } = useQuestionState(options);\r\n\r\nconst handleCheck = async () => {\r\n  const isValid = await validateAnswer();\r\n  if (!isValid) {\r\n    incrementAttempt();\r\n    console.log(`Try again. Attempt ${attemptNumber + 1}`);\r\n  }\r\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"questionanswer-object",children:"QuestionAnswer Object"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"answer"})," property and callbacks receive this structure:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"interface QuestionAnswer<T> {\r\n  questionId: string;      // ID of the question\r\n  value: T;                // The answer value (type depends on question type)\r\n  isAnswered: boolean;     // Whether answered (not null/undefined/empty)\r\n  attemptNumber: number;   // Current attempt number\r\n  timeSpent: number;       // Time spent in seconds\r\n  timestamp: string;       // ISO timestamp of last update\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"submission-status-values",children:"Submission Status Values"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"type SubmissionStatus = \r\n  | 'not-started'  // Question hasn't been interacted with\r\n  | 'in-progress'  // User is answering\r\n  | 'submitted'    // Answer has been submitted\r\n  | 'graded';      // Answer has been graded\n"})}),"\n",(0,r.jsx)(n.h2,{id:"time-tracking",children:"Time Tracking"}),"\n",(0,r.jsxs)(n.p,{children:["Time tracking starts when the hook is initialized and updates every second while the status is ",(0,r.jsx)(n.code,{children:"'not-started'"})," or ",(0,r.jsx)(n.code,{children:"'in-progress'"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"display-time",children:"Display Time"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { timeSpent } = useQuestionState(options);\r\n\r\n// Format as MM:SS\r\nconst formatTime = (seconds: number) => {\r\n  const mins = Math.floor(seconds / 60);\r\n  const secs = seconds % 60;\r\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n};\r\n\r\nreturn <div>Time: {formatTime(timeSpent)}</div>;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"stop-time-tracking",children:"Stop Time Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { setStatus } = useQuestionState(options);\r\n\r\n// Time tracking stops when status is 'submitted' or 'graded'\r\nconst handleSubmit = () => {\r\n  setStatus('submitted');\r\n  // Time tracking automatically stops\r\n};\n"})}),"\n",(0,r.jsx)(n.h2,{id:"auto-save-feature",children:"Auto-save Feature"}),"\n",(0,r.jsxs)(n.p,{children:["When ",(0,r.jsx)(n.code,{children:"autoSave"})," is enabled, the hook automatically triggers a save action after the specified delay following an answer change."]}),"\n",(0,r.jsx)(n.h3,{id:"basic-auto-save",children:"Basic Auto-save"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const state = useQuestionState({\r\n  config: questionConfig,\r\n  autoSave: true,\r\n  autoSaveDelay: 1000, // Wait 1 second after typing stops\r\n  onAnswerChange: (answer) => {\r\n    // Called immediately on change\r\n    updateUI(answer);\r\n  },\r\n});\r\n\r\n// Auto-save logs to console by default\r\n// Override by implementing your own save logic\n"})}),"\n",(0,r.jsx)(n.h3,{id:"custom-auto-save-logic",children:"Custom Auto-save Logic"}),"\n",(0,r.jsx)(n.p,{children:"Since the hook logs to console by default, you'll typically want to implement your own save logic:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\r\n\r\nfunction useCustomAutoSave(answer, delay) {\r\n  useEffect(() => {\r\n    if (!answer.isAnswered) return;\r\n\r\n    const timeout = setTimeout(() => {\r\n      // Your custom save logic\r\n      fetch('/api/save', {\r\n        method: 'POST',\r\n        body: JSON.stringify(answer),\r\n      });\r\n    }, delay);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [answer, delay]);\r\n}\r\n\r\nfunction MyQuestion({ config }) {\r\n  const state = useQuestionState({\r\n    config,\r\n    autoSave: false, // Disable built-in auto-save\r\n  });\r\n\r\n  // Use custom auto-save\r\n  useCustomAutoSave(state.answer, 2000);\r\n\r\n  return <div>...</div>;\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"examples-1",children:"Examples"}),"\n",(0,r.jsx)(n.h3,{id:"short-answer-question",children:"Short Answer Question"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function ShortAnswerQuestion({ config }) {\r\n  const {\r\n    answer,\r\n    setAnswer,\r\n    clearAnswer,\r\n    status,\r\n    timeSpent,\r\n    isAnswered,\r\n  } = useQuestionState({\r\n    config,\r\n    initialAnswer: '',\r\n    onAnswerChange: (answer) => {\r\n      console.log('Answer updated:', answer);\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <h3>{config.question}</h3>\r\n      <textarea\r\n        value={answer.value || ''}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n        disabled={status === 'submitted'}\r\n        placeholder=\"Type your answer here...\"\r\n      />\r\n      <div>\r\n        <span>Time spent: {timeSpent}s</span>\r\n        <span>Status: {status}</span>\r\n      </div>\r\n      <button onClick={clearAnswer} disabled={!isAnswered}>\r\n        Clear\r\n      </button>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multiple-choice-with-attempt-tracking",children:"Multiple Choice with Attempt Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function MultipleChoiceQuestion({ config, maxAttempts = 3 }) {\r\n  const {\r\n    answer,\r\n    setAnswer,\r\n    status,\r\n    setStatus,\r\n    attemptNumber,\r\n    incrementAttempt,\r\n  } = useQuestionState({\r\n    config,\r\n  });\r\n\r\n  const handleCheck = () => {\r\n    const isCorrect = answer.value === config.correctAnswer;\r\n    \r\n    if (!isCorrect) {\r\n      incrementAttempt();\r\n      \r\n      if (attemptNumber >= maxAttempts) {\r\n        setStatus('submitted');\r\n        alert('Maximum attempts reached');\r\n      } else {\r\n        alert(`Incorrect. Attempt ${attemptNumber + 1} of ${maxAttempts}`);\r\n      }\r\n    } else {\r\n      setStatus('submitted');\r\n      alert('Correct!');\r\n    }\r\n  };\r\n\r\n  const isLocked = status === 'submitted' || attemptNumber > maxAttempts;\r\n\r\n  return (\r\n    <div>\r\n      <h3>{config.question}</h3>\r\n      {config.options.map((option) => (\r\n        <label key={option.id}>\r\n          <input\r\n            type=\"radio\"\r\n            name={config.id}\r\n            value={option.id}\r\n            checked={answer.value === option.id}\r\n            onChange={(e) => setAnswer(e.target.value)}\r\n            disabled={isLocked}\r\n          />\r\n          {option.text}\r\n        </label>\r\n      ))}\r\n      <div>\r\n        <button onClick={handleCheck} disabled={isLocked || !answer.isAnswered}>\r\n          Check Answer\r\n        </button>\r\n        <span>Attempts: {attemptNumber} / {maxAttempts}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"controlled-component",children:"Controlled Component"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function ControlledQuestion({ config, externalAnswer, onExternalChange }) {\r\n  const {\r\n    setAnswer,\r\n    status,\r\n    timeSpent,\r\n    isAnswered,\r\n  } = useQuestionState({\r\n    config,\r\n    initialAnswer: externalAnswer,\r\n    onAnswerChange: (answer) => {\r\n      // Sync with parent component\r\n      onExternalChange(answer);\r\n    },\r\n  });\r\n\r\n  // Use external answer if provided\r\n  const currentAnswer = externalAnswer || '';\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        value={currentAnswer}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n      />\r\n      <div>Time: {timeSpent}s | Status: {status}</div>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"quiz-with-auto-save",children:"Quiz with Auto-save"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function QuizQuestion({ config }) {\r\n  const {\r\n    answer,\r\n    setAnswer,\r\n    status,\r\n    setStatus,\r\n    timeSpent,\r\n    isAnswered,\r\n  } = useQuestionState({\r\n    config,\r\n    autoSave: true,\r\n    autoSaveDelay: 2000,\r\n    onAnswerChange: (answer) => {\r\n      // Immediate feedback\r\n      updateProgressBar(answer);\r\n    },\r\n  });\r\n\r\n  const handleSubmit = async () => {\r\n    setStatus('submitted');\r\n    \r\n    const result = await submitToServer({\r\n      ...answer,\r\n      finalTimeSpent: timeSpent,\r\n    });\r\n    \r\n    if (result.graded) {\r\n      setStatus('graded');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h3>{config.question}</h3>\r\n      <input\r\n        value={answer.value || ''}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n        disabled={status !== 'in-progress' && status !== 'not-started'}\r\n      />\r\n      <div>\r\n        <p>Time: {timeSpent}s</p>\r\n        <p>Auto-saved {isAnswered ? '\u2713' : '...'}</p>\r\n      </div>\r\n      <button\r\n        onClick={handleSubmit}\r\n        disabled={!isAnswered || status === 'submitted'}\r\n      >\r\n        Submit\r\n      </button>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"progress-tracking",children:"Progress Tracking"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"function QuestionWithProgress({ config }) {\r\n  const {\r\n    answer,\r\n    setAnswer,\r\n    timeSpent,\r\n    isAnswered,\r\n    attemptNumber,\r\n  } = useQuestionState({\r\n    config,\r\n    onAnswerChange: (answer) => {\r\n      // Track analytics\r\n      trackEvent('question_answered', {\r\n        questionId: answer.questionId,\r\n        attemptNumber: answer.attemptNumber,\r\n        timeSpent: answer.timeSpent,\r\n      });\r\n    },\r\n  });\r\n\r\n  const progress = {\r\n    answered: isAnswered,\r\n    attempts: attemptNumber,\r\n    time: timeSpent,\r\n    efficiency: isAnswered ? timeSpent / attemptNumber : 0,\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h3>{config.question}</h3>\r\n      <input\r\n        value={answer.value || ''}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n      />\r\n      <div className=\"progress-stats\">\r\n        <div>Status: {isAnswered ? 'Answered' : 'Not answered'}</div>\r\n        <div>Attempts: {progress.attempts}</div>\r\n        <div>Time: {progress.time}s</div>\r\n        <div>Avg time/attempt: {progress.efficiency.toFixed(1)}s</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"typescript",children:"TypeScript"}),"\n",(0,r.jsx)(n.p,{children:"Full TypeScript support with generic types:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"import { useQuestionState } from '@scinforma/picolms';\r\nimport type { QuestionAnswer } from '@scinforma/picolms';\r\n\r\n// For string answers\r\nconst stringState = useQuestionState<string>({\r\n  config: shortAnswerConfig,\r\n  initialAnswer: '',\r\n});\r\n\r\n// For multiple choice (single selection)\r\nconst mcState = useQuestionState<string>({\r\n  config: multipleChoiceConfig,\r\n  initialAnswer: 'option-a',\r\n});\r\n\r\n// For multiple choice (multi-select)\r\nconst multiSelectState = useQuestionState<string[]>({\r\n  config: multiSelectConfig,\r\n  initialAnswer: [],\r\n});\r\n\r\n// Custom answer type\r\ninterface CustomAnswer {\r\n  text: string;\r\n  confidence: number;\r\n}\r\n\r\nconst customState = useQuestionState<CustomAnswer>({\r\n  config: customConfig,\r\n  initialAnswer: { text: '', confidence: 0 },\r\n  onAnswerChange: (answer: QuestionAnswer<CustomAnswer>) => {\r\n    console.log(answer.value.text);\r\n    console.log(answer.value.confidence);\r\n  },\r\n});\n"})}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Initialize Early"}),": Call ",(0,r.jsx)(n.code,{children:"useQuestionState"})," at the component level, not conditionally."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Callbacks for Side Effects"}),": Use ",(0,r.jsx)(n.code,{children:"onAnswerChange"})," for analytics, persistence, or parent updates."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Handle Status Changes"}),": Update UI based on status to show submitted/graded states."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Type Your Answers"}),": Use TypeScript generics for type safety with different answer types."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Clear on Reset"}),": Call ",(0,r.jsx)(n.code,{children:"clearAnswer()"})," when resetting questions, not ",(0,r.jsx)(n.code,{children:"setAnswer(undefined)"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Monitor Time Spent"}),": Display ",(0,r.jsx)(n.code,{children:"timeSpent"})," to users to encourage time awareness."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implement Custom Auto-save"}),": For production, implement your own auto-save logic with proper error handling."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Track Attempts"}),": Use ",(0,r.jsx)(n.code,{children:"attemptNumber"})," to limit retries and provide progressive hints."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"reset-question",children:"Reset Question"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { clearAnswer, setStatus, attemptNumber } = useQuestionState(options);\r\n\r\nconst resetQuestion = () => {\r\n  clearAnswer();\r\n  setStatus('not-started');\r\n  // Note: attemptNumber is not reset automatically\r\n};\n"})}),"\n",(0,r.jsx)(n.h3,{id:"check-if-modified",children:"Check if Modified"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { answer, isAnswered, timeSpent } = useQuestionState(options);\r\n\r\nconst isModified = isAnswered && timeSpent > 0;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"prevent-navigation-with-unsaved-changes",children:"Prevent Navigation with Unsaved Changes"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"const { isAnswered, status } = useQuestionState(options);\r\n\r\nuseEffect(() => {\r\n  const hasUnsavedChanges = isAnswered && status !== 'submitted';\r\n  \r\n  const handleBeforeUnload = (e: BeforeUnloadEvent) => {\r\n    if (hasUnsavedChanges) {\r\n      e.preventDefault();\r\n      e.returnValue = '';\r\n    }\r\n  };\r\n  \r\n  window.addEventListener('beforeunload', handleBeforeUnload);\r\n  return () => window.removeEventListener('beforeunload', handleBeforeUnload);\r\n}, [isAnswered, status]);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"related-hooks",children:"Related Hooks"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"useQuestionValidation"}),": Validate question answers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"useQuestionTimer"}),": Add time limits to questions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"useQuestion"}),": Access question context (uses useQuestionState internally)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Time tracking updates every second while status is ",(0,r.jsx)(n.code,{children:"'not-started'"})," or ",(0,r.jsx)(n.code,{children:"'in-progress'"})]}),"\n",(0,r.jsxs)(n.li,{children:["Auto-save only triggers when ",(0,r.jsx)(n.code,{children:"isAnswered"})," is ",(0,r.jsx)(n.code,{children:"true"})]}),"\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"onAnswerChange"})," callback fires before auto-save"]}),"\n",(0,r.jsx)(n.li,{children:"Status changes can be used to stop time tracking"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"isAnswered"})," checks if value is not null, undefined, or empty string"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);