"use strict";(globalThis.webpackChunkpicolms_docs=globalThis.webpackChunkpicolms_docs||[]).push([[5926],{2969(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"api/hooks/use-question-validation","title":"useQuestionValidation","description":"A React hook for validating question answers with support for built-in and custom validation rules, real-time validation, and comprehensive error handling.","source":"@site/docs/api/hooks/use-question-validation.mdx","sourceDirName":"api/hooks","slug":"/api/hooks/use-question-validation","permalink":"/picolms-docs/docs/api/hooks/use-question-validation","draft":false,"unlisted":false,"editUrl":"https://github.com/berkesas/picolms/tree/main/packages/create-docusaurus/templates/shared/docs/api/hooks/use-question-validation.mdx","tags":[],"version":"current","frontMatter":{"id":"use-question-validation","title":"useQuestionValidation","sidebar_label":"useQuestionValidation"},"sidebar":"apiSidebar","previous":{"title":"useQuestionTimer","permalink":"/picolms-docs/docs/api/hooks/use-question-timer"}}');var i=r(4848),s=r(8453);const l={id:"use-question-validation",title:"useQuestionValidation",sidebar_label:"useQuestionValidation"},t="useQuestionValidation",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Import",id:"import",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Parameters",id:"parameters",level:2},{value:"<code>options</code>",id:"options",level:3},{value:"Examples",id:"examples",level:3},{value:"Basic Configuration",id:"basic-configuration",level:4},{value:"With Multiple Rules",id:"with-multiple-rules",level:4},{value:"With Auto-validation",id:"with-auto-validation",level:4},{value:"With Validation Callback",id:"with-validation-callback",level:4},{value:"With Custom Validation",id:"with-custom-validation",level:4},{value:"Return Value",id:"return-value",level:2},{value:"Properties",id:"properties",level:3},{value:"<code>validation</code>",id:"validation",level:4},{value:"<code>isValidating</code>",id:"isvalidating",level:4},{value:"Methods",id:"methods",level:3},{value:"<code>validate()</code>",id:"validate",level:4},{value:"<code>clearValidation()</code>",id:"clearvalidation",level:4},{value:"Validation Rules",id:"validation-rules",level:2},{value:"ValidationRule Interface",id:"validationrule-interface",level:3},{value:"Built-in Rule Types",id:"built-in-rule-types",level:3},{value:"<code>required</code>",id:"required",level:4},{value:"<code>minLength</code>",id:"minlength",level:4},{value:"<code>maxLength</code>",id:"maxlength",level:4},{value:"<code>pattern</code>",id:"pattern",level:4},{value:"<code>custom</code>",id:"custom",level:4},{value:"ValidationResult Object",id:"validationresult-object",level:2},{value:"Examples",id:"examples-1",level:2},{value:"Short Answer with Basic Validation",id:"short-answer-with-basic-validation",level:3},{value:"Real-time Validation",id:"real-time-validation",level:3},{value:"Async Validation with API Check",id:"async-validation-with-api-check",level:3},{value:"Password Strength Validation",id:"password-strength-validation",level:3},{value:"Form with Multiple Fields",id:"form-with-multiple-fields",level:3},{value:"Conditional Validation",id:"conditional-validation",level:3},{value:"Validation with Callbacks",id:"validation-with-callbacks",level:3},{value:"Debounced Validation",id:"debounced-validation",level:3},{value:"Validation Behavior",id:"validation-behavior",level:2},{value:"Validation Timing",id:"validation-timing",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"State Updates",id:"state-updates",level:3},{value:"TypeScript",id:"typescript",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Validate on Blur",id:"validate-on-blur",level:3},{value:"Conditional Error Display",id:"conditional-error-display",level:3},{value:"Disable Submit Until Valid",id:"disable-submit-until-valid",level:3},{value:"Related Hooks",id:"related-hooks",level:2},{value:"Notes",id:"notes",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"usequestionvalidation",children:"useQuestionValidation"})}),"\n",(0,i.jsx)(n.p,{children:"A React hook for validating question answers with support for built-in and custom validation rules, real-time validation, and comprehensive error handling."}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"useQuestionValidation"})," handles:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rule-based Validation"}),": Support for required, length, pattern, and custom rules"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Async Validation"}),": Handle asynchronous validation functions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time Validation"}),": Validate on change or manually trigger validation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Error Management"}),": Track validation errors and warnings"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation State"}),": Monitor validation progress with loading state"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Callback Support"}),": Notify parent components of validation changes"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"import",children:"Import"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useQuestionValidation } from './hooks/useQuestionValidation';\r\nimport type { \r\n  UseQuestionValidationOptions, \r\n  UseQuestionValidationReturn,\r\n  ValidationRule,\r\n  ValidationResult \r\n} from './hooks/useQuestionValidation';\n"})}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useQuestionValidation } from './hooks/useQuestionValidation';\r\n\r\nfunction EmailQuestion({ value, onChange }) {\r\n  const {\r\n    validation,\r\n    validate,\r\n    isValidating,\r\n  } = useQuestionValidation({\r\n    value,\r\n    rules: [\r\n      { type: 'required', message: 'Email is required' },\r\n      { \r\n        type: 'pattern', \r\n        value: '^[^\\\\s@]+@[^\\\\s@]+\\\\.[^\\\\s@]+$',\r\n        message: 'Invalid email format' \r\n      },\r\n    ],\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n      />\r\n      {validation.errors.map((error, i) => (\r\n        <p key={i} className=\"error\">{error}</p>\r\n      ))}\r\n      <button onClick={validate} disabled={isValidating}>\r\n        Validate\r\n      </button>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,i.jsx)(n.h3,{id:"options",children:(0,i.jsx)(n.code,{children:"options"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"UseQuestionValidationOptions<T>"})]}),"\n",(0,i.jsx)(n.p,{children:"Configuration object for the hook."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Property"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"value"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"T"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"The value to validate"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"rules"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ValidationRule[]"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"[]"})}),(0,i.jsx)(n.td,{children:"Array of validation rules to apply"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"validateOnChange"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Whether to validate automatically when value changes"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"validateOnBlur"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"boolean"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Whether to validate on blur event (not implemented in hook)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onValidationChange"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"(result: ValidationResult) => void"})}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"-"}),(0,i.jsx)(n.td,{children:"Callback executed when validation result changes"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h4,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const validation = useQuestionValidation({\r\n  value: answer,\r\n  rules: [\r\n    { type: 'required', message: 'This field is required' },\r\n  ],\r\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"with-multiple-rules",children:"With Multiple Rules"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const validation = useQuestionValidation({\r\n  value: password,\r\n  rules: [\r\n    { type: 'required', message: 'Password is required' },\r\n    { type: 'minLength', value: 8, message: 'Password must be at least 8 characters' },\r\n    { type: 'maxLength', value: 32, message: 'Password must be less than 32 characters' },\r\n    { \r\n      type: 'pattern', \r\n      value: '(?=.*[A-Z])(?=.*[0-9])',\r\n      message: 'Password must contain uppercase and numbers' \r\n    },\r\n  ],\r\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"with-auto-validation",children:"With Auto-validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const validation = useQuestionValidation({\r\n  value: username,\r\n  rules: [\r\n    { type: 'required', message: 'Username is required' },\r\n    { type: 'minLength', value: 3, message: 'Username must be at least 3 characters' },\r\n  ],\r\n  validateOnChange: true, // Validate on every change\r\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"with-validation-callback",children:"With Validation Callback"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const validation = useQuestionValidation({\r\n  value: answer,\r\n  rules: questionRules,\r\n  onValidationChange: (result) => {\r\n    console.log('Validation changed:', result);\r\n    if (result.isValid) {\r\n      enableSubmitButton();\r\n    } else {\r\n      disableSubmitButton();\r\n    }\r\n  },\r\n});\n"})}),"\n",(0,i.jsx)(n.h4,{id:"with-custom-validation",children:"With Custom Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const validation = useQuestionValidation({\r\n  value: email,\r\n  rules: [\r\n    { type: 'required', message: 'Email is required' },\r\n    {\r\n      type: 'custom',\r\n      message: 'Email already exists',\r\n      validate: async (value) => {\r\n        const response = await fetch(`/api/check-email?email=${value}`);\r\n        const data = await response.json();\r\n        return data.available;\r\n      },\r\n    },\r\n  ],\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"return-value",children:"Return Value"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"UseQuestionValidationReturn"})]}),"\n",(0,i.jsx)(n.p,{children:"The hook returns an object with the following properties and methods:"}),"\n",(0,i.jsx)(n.h3,{id:"properties",children:"Properties"}),"\n",(0,i.jsx)(n.h4,{id:"validation",children:(0,i.jsx)(n.code,{children:"validation"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"ValidationResult"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Current validation result containing validity status, errors, and warnings"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const { validation } = useQuestionValidation(options);\r\n\r\nconsole.log(validation);\r\n// {\r\n//   isValid: false,\r\n//   errors: ['This field is required', 'Invalid format'],\r\n//   warnings: []\r\n// }\n"})}),"\n",(0,i.jsx)(n.h4,{id:"isvalidating",children:(0,i.jsx)(n.code,{children:"isValidating"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"boolean"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Whether validation is currently in progress (useful for async validations)"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const { isValidating } = useQuestionValidation(options);\r\n\r\nif (isValidating) {\r\n  console.log('Validation in progress...');\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"methods",children:"Methods"}),"\n",(0,i.jsx)(n.h4,{id:"validate",children:(0,i.jsx)(n.code,{children:"validate()"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"() => Promise<ValidationResult>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Manually trigger validation and return the result"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const { validate } = useQuestionValidation(options);\r\n\r\n// Trigger validation manually\r\nconst handleSubmit = async () => {\r\n  const result = await validate();\r\n  if (result.isValid) {\r\n    submitForm();\r\n  }\r\n};\n"})}),"\n",(0,i.jsx)(n.h4,{id:"clearvalidation",children:(0,i.jsx)(n.code,{children:"clearValidation()"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Type"}),": ",(0,i.jsx)(n.code,{children:"() => void"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Description"}),": Clear all validation errors and reset to valid state"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const { clearValidation } = useQuestionValidation(options);\r\n\r\n// Reset validation state\r\nconst handleReset = () => {\r\n  clearValidation();\r\n  resetForm();\r\n};\n"})}),"\n",(0,i.jsx)(n.h2,{id:"validation-rules",children:"Validation Rules"}),"\n",(0,i.jsx)(n.h3,{id:"validationrule-interface",children:"ValidationRule Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface ValidationRule {\r\n  type: 'required' | 'minLength' | 'maxLength' | 'pattern' | 'custom';\r\n  message: string;\r\n  value?: number | string;\r\n  validate?: (value: any) => boolean | Promise<boolean>;\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"built-in-rule-types",children:"Built-in Rule Types"}),"\n",(0,i.jsx)(n.h4,{id:"required",children:(0,i.jsx)(n.code,{children:"required"})}),"\n",(0,i.jsx)(n.p,{children:"Validates that the value is not null, undefined, or empty string."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"{\r\n  type: 'required',\r\n  message: 'This field is required'\r\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"minlength",children:(0,i.jsx)(n.code,{children:"minLength"})}),"\n",(0,i.jsx)(n.p,{children:"Validates that a string value has at least the specified length."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"{\r\n  type: 'minLength',\r\n  value: 5,\r\n  message: 'Must be at least 5 characters'\r\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"maxlength",children:(0,i.jsx)(n.code,{children:"maxLength"})}),"\n",(0,i.jsx)(n.p,{children:"Validates that a string value does not exceed the specified length."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"{\r\n  type: 'maxLength',\r\n  value: 100,\r\n  message: 'Must be less than 100 characters'\r\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"pattern",children:(0,i.jsx)(n.code,{children:"pattern"})}),"\n",(0,i.jsx)(n.p,{children:"Validates that a string value matches the specified regex pattern."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"{\r\n  type: 'pattern',\r\n  value: '^[a-zA-Z0-9]+$',\r\n  message: 'Only alphanumeric characters allowed'\r\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"custom",children:(0,i.jsx)(n.code,{children:"custom"})}),"\n",(0,i.jsx)(n.p,{children:"Executes a custom validation function (sync or async)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"{\r\n  type: 'custom',\r\n  message: 'Custom validation failed',\r\n  validate: async (value) => {\r\n    // Return true if valid, false if invalid\r\n    return await checkCustomRule(value);\r\n  }\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"validationresult-object",children:"ValidationResult Object"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface ValidationResult {\r\n  isValid: boolean;      // Overall validity status\r\n  errors: string[];      // Array of error messages\r\n  warnings: string[];    // Array of warning messages\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"examples-1",children:"Examples"}),"\n",(0,i.jsx)(n.h3,{id:"short-answer-with-basic-validation",children:"Short Answer with Basic Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"function ShortAnswerQuestion() {\r\n  const [answer, setAnswer] = useState('');\r\n\r\n  const {\r\n    validation,\r\n    validate,\r\n    clearValidation,\r\n  } = useQuestionValidation({\r\n    value: answer,\r\n    rules: [\r\n      { type: 'required', message: 'Answer is required' },\r\n      { type: 'minLength', value: 10, message: 'Answer must be at least 10 characters' },\r\n      { type: 'maxLength', value: 500, message: 'Answer must be less than 500 characters' },\r\n    ],\r\n  });\r\n\r\n  const handleSubmit = async () => {\r\n    const result = await validate();\r\n    if (result.isValid) {\r\n      submitAnswer(answer);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <textarea\r\n        value={answer}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n        placeholder=\"Type your answer here...\"\r\n      />\r\n      <div className=\"validation-errors\">\r\n        {validation.errors.map((error, index) => (\r\n          <p key={index} className=\"error\">{error}</p>\r\n        ))}\r\n      </div>\r\n      <div>\r\n        <button onClick={handleSubmit}>Submit</button>\r\n        <button onClick={clearValidation}>Clear Errors</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"real-time-validation",children:"Real-time Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"function EmailInput() {\r\n  const [email, setEmail] = useState('');\r\n\r\n  const {\r\n    validation,\r\n    isValidating,\r\n  } = useQuestionValidation({\r\n    value: email,\r\n    rules: [\r\n      { type: 'required', message: 'Email is required' },\r\n      {\r\n        type: 'pattern',\r\n        value: '^[^\\\\s@]+@[^\\\\s@]+\\\\.[^\\\\s@]+$',\r\n        message: 'Please enter a valid email address',\r\n      },\r\n    ],\r\n    validateOnChange: true, // Validate as user types\r\n  });\r\n\r\n  const getInputClassName = () => {\r\n    if (!email) return '';\r\n    if (isValidating) return 'validating';\r\n    return validation.isValid ? 'valid' : 'invalid';\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n        className={getInputClassName()}\r\n      />\r\n      {isValidating && <span className=\"spinner\">Validating...</span>}\r\n      {!validation.isValid && (\r\n        <div className=\"errors\">\r\n          {validation.errors.map((error, i) => (\r\n            <p key={i}>{error}</p>\r\n          ))}\r\n        </div>\r\n      )}\r\n      {validation.isValid && email && (\r\n        <span className=\"success\">\u2713 Valid email</span>\r\n      )}\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"async-validation-with-api-check",children:"Async Validation with API Check"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"function UsernameInput() {\r\n  const [username, setUsername] = useState('');\r\n\r\n  const {\r\n    validation,\r\n    validate,\r\n    isValidating,\r\n  } = useQuestionValidation({\r\n    value: username,\r\n    rules: [\r\n      { type: 'required', message: 'Username is required' },\r\n      { type: 'minLength', value: 3, message: 'Username must be at least 3 characters' },\r\n      { type: 'maxLength', value: 20, message: 'Username must be less than 20 characters' },\r\n      {\r\n        type: 'pattern',\r\n        value: '^[a-zA-Z0-9_]+$',\r\n        message: 'Username can only contain letters, numbers, and underscores',\r\n      },\r\n      {\r\n        type: 'custom',\r\n        message: 'Username is already taken',\r\n        validate: async (value) => {\r\n          const response = await fetch(`/api/check-username?username=${value}`);\r\n          const data = await response.json();\r\n          return data.available;\r\n        },\r\n      },\r\n    ],\r\n  });\r\n\r\n  const handleBlur = () => {\r\n    validate();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <label>Username</label>\r\n      <input\r\n        value={username}\r\n        onChange={(e) => setUsername(e.target.value)}\r\n        onBlur={handleBlur}\r\n      />\r\n      {isValidating && <span>Checking availability...</span>}\r\n      {!isValidating && !validation.isValid && (\r\n        <ul className=\"error-list\">\r\n          {validation.errors.map((error, i) => (\r\n            <li key={i}>{error}</li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n      {!isValidating && validation.isValid && username && (\r\n        <span className=\"success\">\u2713 Username available</span>\r\n      )}\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"password-strength-validation",children:"Password Strength Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"function PasswordInput() {\r\n  const [password, setPassword] = useState('');\r\n\r\n  const {\r\n    validation,\r\n    validate,\r\n  } = useQuestionValidation({\r\n    value: password,\r\n    rules: [\r\n      { type: 'required', message: 'Password is required' },\r\n      { type: 'minLength', value: 8, message: 'Password must be at least 8 characters' },\r\n      {\r\n        type: 'pattern',\r\n        value: '(?=.*[a-z])',\r\n        message: 'Password must contain at least one lowercase letter',\r\n      },\r\n      {\r\n        type: 'pattern',\r\n        value: '(?=.*[A-Z])',\r\n        message: 'Password must contain at least one uppercase letter',\r\n      },\r\n      {\r\n        type: 'pattern',\r\n        value: '(?=.*[0-9])',\r\n        message: 'Password must contain at least one number',\r\n      },\r\n      {\r\n        type: 'pattern',\r\n        value: '(?=.*[!@#$%^&*])',\r\n        message: 'Password must contain at least one special character',\r\n      },\r\n    ],\r\n    validateOnChange: true,\r\n  });\r\n\r\n  const getStrength = () => {\r\n    if (!password) return null;\r\n    const errorCount = validation.errors.length;\r\n    if (errorCount === 0) return 'strong';\r\n    if (errorCount <= 2) return 'medium';\r\n    return 'weak';\r\n  };\r\n\r\n  const strength = getStrength();\r\n\r\n  return (\r\n    <div>\r\n      <label>Password</label>\r\n      <input\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      {strength && (\r\n        <div className={`strength-indicator ${strength}`}>\r\n          Strength: {strength}\r\n        </div>\r\n      )}\r\n      {!validation.isValid && (\r\n        <div className=\"requirements\">\r\n          <p>Password must contain:</p>\r\n          <ul>\r\n            {validation.errors.map((error, i) => (\r\n              <li key={i}>{error}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"form-with-multiple-fields",children:"Form with Multiple Fields"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"function RegistrationForm() {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const usernameValidation = useQuestionValidation({\r\n    value: formData.username,\r\n    rules: [\r\n      { type: 'required', message: 'Username is required' },\r\n      { type: 'minLength', value: 3, message: 'Minimum 3 characters' },\r\n    ],\r\n  });\r\n\r\n  const emailValidation = useQuestionValidation({\r\n    value: formData.email,\r\n    rules: [\r\n      { type: 'required', message: 'Email is required' },\r\n      {\r\n        type: 'pattern',\r\n        value: '^[^\\\\s@]+@[^\\\\s@]+\\\\.[^\\\\s@]+$',\r\n        message: 'Invalid email',\r\n      },\r\n    ],\r\n  });\r\n\r\n  const passwordValidation = useQuestionValidation({\r\n    value: formData.password,\r\n    rules: [\r\n      { type: 'required', message: 'Password is required' },\r\n      { type: 'minLength', value: 8, message: 'Minimum 8 characters' },\r\n    ],\r\n  });\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Validate all fields\r\n    const [usernameResult, emailResult, passwordResult] = await Promise.all([\r\n      usernameValidation.validate(),\r\n      emailValidation.validate(),\r\n      passwordValidation.validate(),\r\n    ]);\r\n\r\n    const allValid = \r\n      usernameResult.isValid && \r\n      emailResult.isValid && \r\n      passwordResult.isValid;\r\n\r\n    if (allValid) {\r\n      submitForm(formData);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>\r\n        <input\r\n          value={formData.username}\r\n          onChange={(e) => setFormData({ ...formData, username: e.target.value })}\r\n          placeholder=\"Username\"\r\n        />\r\n        {usernameValidation.validation.errors.map((error, i) => (\r\n          <p key={i} className=\"error\">{error}</p>\r\n        ))}\r\n      </div>\r\n\r\n      <div>\r\n        <input\r\n          value={formData.email}\r\n          onChange={(e) => setFormData({ ...formData, email: e.target.value })}\r\n          placeholder=\"Email\"\r\n        />\r\n        {emailValidation.validation.errors.map((error, i) => (\r\n          <p key={i} className=\"error\">{error}</p>\r\n        ))}\r\n      </div>\r\n\r\n      <div>\r\n        <input\r\n          type=\"password\"\r\n          value={formData.password}\r\n          onChange={(e) => setFormData({ ...formData, password: e.target.value })}\r\n          placeholder=\"Password\"\r\n        />\r\n        {passwordValidation.validation.errors.map((error, i) => (\r\n          <p key={i} className=\"error\">{error}</p>\r\n        ))}\r\n      </div>\r\n\r\n      <button type=\"submit\">Register</button>\r\n    </form>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"conditional-validation",children:"Conditional Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"function ConditionalValidationForm() {\r\n  const [formData, setFormData] = useState({\r\n    accountType: 'personal',\r\n    companyName: '',\r\n  });\r\n\r\n  // Only validate company name if account type is 'business'\r\n  const companyValidation = useQuestionValidation({\r\n    value: formData.companyName,\r\n    rules: formData.accountType === 'business' \r\n      ? [\r\n          { type: 'required', message: 'Company name is required for business accounts' },\r\n          { type: 'minLength', value: 2, message: 'Company name must be at least 2 characters' },\r\n        ]\r\n      : [],\r\n    validateOnChange: true,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <select\r\n        value={formData.accountType}\r\n        onChange={(e) => setFormData({ ...formData, accountType: e.target.value })}\r\n      >\r\n        <option value=\"personal\">Personal</option>\r\n        <option value=\"business\">Business</option>\r\n      </select>\r\n\r\n      {formData.accountType === 'business' && (\r\n        <div>\r\n          <input\r\n            value={formData.companyName}\r\n            onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\r\n            placeholder=\"Company Name\"\r\n          />\r\n          {companyValidation.validation.errors.map((error, i) => (\r\n            <p key={i} className=\"error\">{error}</p>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"validation-with-callbacks",children:"Validation with Callbacks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'function QuestionWithValidation({ config, onValidChange }) {\r\n  const [answer, setAnswer] = useState(\'\');\r\n\r\n  const {\r\n    validation,\r\n    validate,\r\n    isValidating,\r\n  } = useQuestionValidation({\r\n    value: answer,\r\n    rules: config.validationRules,\r\n    onValidationChange: (result) => {\r\n      // Notify parent component\r\n      onValidChange(result);\r\n      \r\n      // Track analytics\r\n      if (!result.isValid) {\r\n        trackEvent(\'validation_failed\', {\r\n          questionId: config.id,\r\n          errors: result.errors,\r\n        });\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <h3>{config.question}</h3>\r\n      <input\r\n        value={answer}\r\n        onChange={(e) => setAnswer(e.target.value)}\r\n        onBlur={validate}\r\n      />\r\n      {isValidating && <span>Validating...</span>}\r\n      <ValidationDisplay validation={validation} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ValidationDisplay({ validation }) {\r\n  if (validation.isValid) {\r\n    return <p className="success">\u2713 Valid</p>;\r\n  }\r\n\r\n  return (\r\n    <div className="validation-messages">\r\n      {validation.errors.map((error, i) => (\r\n        <p key={i} className="error">\u2717 {error}</p>\r\n      ))}\r\n      {validation.warnings.map((warning, i) => (\r\n        <p key={i} className="warning">\u26a0 {warning}</p>\r\n      ))}\r\n    </div>\r\n  );\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"debounced-validation",children:"Debounced Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useState, useEffect } from 'react';\r\n\r\nfunction DebouncedValidationInput() {\r\n  const [value, setValue] = useState('');\r\n  const [debouncedValue, setDebouncedValue] = useState('');\r\n\r\n  // Debounce the value\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [value]);\r\n\r\n  const {\r\n    validation,\r\n    isValidating,\r\n  } = useQuestionValidation({\r\n    value: debouncedValue,\r\n    rules: [\r\n      {\r\n        type: 'custom',\r\n        message: 'Value already exists',\r\n        validate: async (val) => {\r\n          if (!val) return true;\r\n          const response = await fetch(`/api/check?value=${val}`);\r\n          return response.ok;\r\n        },\r\n      },\r\n    ],\r\n    validateOnChange: true,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        value={value}\r\n        onChange={(e) => setValue(e.target.value)}\r\n        placeholder=\"Type to validate...\"\r\n      />\r\n      {isValidating && <span>Checking...</span>}\r\n      {!isValidating && !validation.isValid && (\r\n        <p className=\"error\">{validation.errors[0]}</p>\r\n      )}\r\n      {!isValidating && validation.isValid && debouncedValue && (\r\n        <p className=\"success\">\u2713 Available</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"validation-behavior",children:"Validation Behavior"}),"\n",(0,i.jsx)(n.h3,{id:"validation-timing",children:"Validation Timing"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Manual Validation"}),": Call ",(0,i.jsx)(n.code,{children:"validate()"})," to manually trigger validation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Auto-validation"}),": When ",(0,i.jsx)(n.code,{children:"validateOnChange"})," is ",(0,i.jsx)(n.code,{children:"true"}),", validation runs automatically when ",(0,i.jsx)(n.code,{children:"value"})," changes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Async Validation"}),": The hook waits for async validation functions to complete before returning results"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Validation errors are caught and added to the errors array as ",(0,i.jsx)(n.code,{children:'"Validation error: {error}"'})]}),"\n",(0,i.jsx)(n.li,{children:"Each rule is evaluated independently"}),"\n",(0,i.jsx)(n.li,{children:"All rules are checked even if some fail"}),"\n",(0,i.jsxs)(n.li,{children:["Validation stops being in progress (",(0,i.jsx)(n.code,{children:"isValidating: false"}),") once all rules are evaluated"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"state-updates",children:"State Updates"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"validate() called\r\n  \u2193\r\nisValidating: true\r\n  \u2193\r\nRun all validation rules (sequential)\r\n  \u2193\r\nCollect errors\r\n  \u2193\r\nUpdate validation result\r\n  \u2193\r\nisValidating: false\r\n  \u2193\r\nCall onValidationChange callback\r\n  \u2193\r\nReturn ValidationResult\n"})}),"\n",(0,i.jsx)(n.h2,{id:"typescript",children:"TypeScript"}),"\n",(0,i.jsx)(n.p,{children:"Full TypeScript support with generic types:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useQuestionValidation } from './hooks/useQuestionValidation';\r\nimport type { ValidationRule, ValidationResult } from './types';\r\n\r\n// For string validation\r\nconst stringValidation = useQuestionValidation<string>({\r\n  value: 'test',\r\n  rules: [\r\n    { type: 'required', message: 'Required' },\r\n    { type: 'minLength', value: 3, message: 'Too short' },\r\n  ],\r\n});\r\n\r\n// For number validation\r\nconst numberValidation = useQuestionValidation<number>({\r\n  value: 42,\r\n  rules: [\r\n    {\r\n      type: 'custom',\r\n      message: 'Must be positive',\r\n      validate: (val: number) => val > 0,\r\n    },\r\n  ],\r\n});\r\n\r\n// For array validation\r\nconst arrayValidation = useQuestionValidation<string[]>({\r\n  value: ['a', 'b', 'c'],\r\n  rules: [\r\n    {\r\n      type: 'custom',\r\n      message: 'Select at least 2 options',\r\n      validate: (val: string[]) => val.length >= 2,\r\n    },\r\n  ],\r\n});\r\n\r\n// Custom type validation\r\ninterface CustomAnswer {\r\n  text: string;\r\n  confidence: number;\r\n}\r\n\r\nconst customValidation = useQuestionValidation<CustomAnswer>({\r\n  value: { text: 'answer', confidence: 0.8 },\r\n  rules: [\r\n    {\r\n      type: 'custom',\r\n      message: 'Confidence must be at least 0.5',\r\n      validate: (val: CustomAnswer) => val.confidence >= 0.5,\r\n    },\r\n  ],\r\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Provide Clear Error Messages"}),": Write user-friendly, actionable error messages."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Auto-validation Wisely"}),": Enable ",(0,i.jsx)(n.code,{children:"validateOnChange"})," for fields that benefit from immediate feedback, but consider debouncing for expensive validations."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Handle Async Errors"}),": Wrap async validation functions in try-catch blocks."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Validate Before Submit"}),": Always call ",(0,i.jsx)(n.code,{children:"validate()"})," before submitting forms, even with auto-validation enabled."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Clear Validation on Reset"}),": Call ",(0,i.jsx)(n.code,{children:"clearValidation()"})," when resetting forms or clearing inputs."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Monitor Loading State"}),": Use ",(0,i.jsx)(n.code,{children:"isValidating"})," to show loading indicators during async validation."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Group Related Rules"}),": Order rules from simple to complex to fail fast."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Custom Rules for Complex Logic"}),": Leverage the ",(0,i.jsx)(n.code,{children:"custom"})," rule type for business logic validation."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"validate-on-blur",children:"Validate on Blur"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const { validate } = useQuestionValidation(options);\r\n\r\n<input\r\n  value={value}\r\n  onChange={(e) => setValue(e.target.value)}\r\n  onBlur={() => validate()}\r\n/>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"conditional-error-display",children:"Conditional Error Display"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const { validation } = useQuestionValidation(options);\r\n\r\nconst showErrors = hasBlurred && !validation.isValid;\r\n\r\n{showErrors && validation.errors.map(error => (\r\n  <p key={error}>{error}</p>\r\n))}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"disable-submit-until-valid",children:"Disable Submit Until Valid"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'const { validation } = useQuestionValidation(options);\r\n\r\n<button \r\n  type="submit" \r\n  disabled={!validation.isValid}\r\n>\r\n  Submit\r\n</button>\n'})}),"\n",(0,i.jsx)(n.h2,{id:"related-hooks",children:"Related Hooks"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"useQuestionState"}),": Manage question state and answers"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"useQuestionTimer"}),": Add time limits to questions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"useQuestion"}),": Access question context"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Validation runs sequentially through all rules"}),"\n",(0,i.jsxs)(n.li,{children:["Empty rules array results in ",(0,i.jsx)(n.code,{children:"isValid: true"})]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"warnings"})," array is reserved for future use (currently always empty)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"validateOnChange"})," uses ",(0,i.jsx)(n.code,{children:"useEffect"})," and may cause re-renders"]}),"\n",(0,i.jsxs)(n.li,{children:["Async validation functions should return ",(0,i.jsx)(n.code,{children:"boolean"})," or ",(0,i.jsx)(n.code,{children:"Promise<boolean>"})]}),"\n",(0,i.jsx)(n.li,{children:"Pattern validation only works with string values"}),"\n",(0,i.jsx)(n.li,{children:"Length validation only works with string values"}),"\n",(0,i.jsx)(n.li,{children:"Custom validation receives the raw value and can handle any type"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>l,x:()=>t});var a=r(6540);const i={},s=a.createContext(i);function l(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);